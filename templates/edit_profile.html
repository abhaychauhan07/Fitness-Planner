<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Profile — FitPlanner</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <script src="{{ url_for('static', filename='js/main.js') }}" defer></script>
</head>
<body class="container">
  <nav class="topbar">
    <div class="brand"><img src="{{ url_for('static', filename='img/logo.svg') }}" alt="logo"><div class="small">FitPlanner</div></div>
    <div class="nav-actions">
      <a class="btn outline" href="{{ url_for('dashboard') }}">← Dashboard</a>
    </div>
  </nav>
  
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="container" style="margin-top:16px;">
        <ul class="flashes">
        {% for category, msg in messages %}
          <li class="{{ category }}">{{ msg }}</li>
        {% endfor %}
        </ul>
      </div>
    {% endif %}
  {% endwith %}
  
  <div style="max-width:560px;margin:20px auto">
    <div class="card form">
      <h3>✏️ Edit Profile</h3>
      <form method="post" class="form">
        <label class="small" style="display:block;margin-bottom:4px;color:var(--muted);">Name</label>
        <input type="text" value="{{ user['name'] }}" disabled style="opacity:0.6;cursor:not-allowed;">
        <p class="small" style="margin-top:-8px;margin-bottom:12px;color:var(--muted);">Name cannot be changed</p>
        
        <label class="small" style="display:block;margin-bottom:4px;color:var(--muted);">Age</label>
        <input name="age" type="number" min="1" max="120" placeholder="Enter your age" value="{{ user['age'] or '' }}">
        
        <label class="small" style="display:block;margin-bottom:4px;color:var(--muted);">Gender</label>
        <select name="gender">
          <option value="">Select gender</option>
          <option value="Male" {% if user['gender'] == 'Male' %}selected{% endif %}>Male</option>
          <option value="Female" {% if user['gender'] == 'Female' %}selected{% endif %}>Female</option>
          <option value="Other" {% if user['gender'] == 'Other' %}selected{% endif %}>Other</option>
        </select>
        
        <label class="small" style="display:block;margin-bottom:4px;color:var(--muted);">Height (cm) <span style="color:var(--accent);">*</span></label>
        <input name="height_cm" type="number" min="100" max="250" step="1" placeholder="e.g., 175" value="{{ user['height_cm'] or '' }}" required>
        
        <label class="small" style="display:block;margin-bottom:4px;color:var(--muted);">Weight (kg) <span style="color:var(--accent);">*</span></label>
        <input name="weight_kg" type="number" min="30" max="300" step="0.1" placeholder="e.g., 70.5" value="{{ user['weight_kg'] or '' }}" required>
        
        <label class="small" style="display:block;margin-bottom:4px;color:var(--muted);">Activity Level <span style="color:var(--accent);">*</span></label>
        <select name="activity_level" required>
          <option value="">Select activity level</option>
          <option value="Sedentary" {% if user['activity_level'] == 'Sedentary' %}selected{% endif %}>Sedentary (little or no exercise)</option>
          <option value="Light" {% if user['activity_level'] == 'Light' %}selected{% endif %}>Light (exercise 1-3 days/week)</option>
          <option value="Moderate" {% if user['activity_level'] == 'Moderate' %}selected{% endif %}>Moderate (exercise 3-5 days/week)</option>
          <option value="Active" {% if user['activity_level'] == 'Active' %}selected{% endif %}>Active (exercise 6-7 days/week)</option>
          <option value="Very Active" {% if user['activity_level'] == 'Very Active' %}selected{% endif %}>Very Active (hard exercise daily)</option>
        </select>
        
        <button type="submit" class="btn" style="margin-top:8px;width:100%;">Update Profile</button>
      </form>
      <p class="small" style="margin-top:16px;text-align:center;"><a href="{{ url_for('dashboard') }}" style="color:var(--accent);">← Back to Dashboard</a></p>
    </div>
  </div>
</body>
</html>

